<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sản phẩm</title>
  <!-- CSS Link -->
  <link rel="stylesheet" href="/admin/css/style.css" />
  <link rel="stylesheet" href="/admin/css/product.css">
  <!-- ICON Link -->
  <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
</head>

<body>
  <!-- SIDE MENU -->
  <div class="admin_sidebar">
    <div class="logo-details">
      <div class="admin_home_logo">
        <i class="ri-gatsby-fill"></i>
        <a href="">
          G<span>LAM</span>
        </a>
      </div>
    </div>
    <ul class="nav-links">
      <li>
        <a href="#">
          <i class="bx bx-grid-alt"></i>
          <span class="links_name">Tổng quan</span>
        </a>
      </li>
      <li>
        <a href="#" class="active">
          <i class="bx bx-box"></i>
          <span class="links_name">Sản phẩm</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class="bx bx-list-ul"></i>
          <span class="links_name">Đơn hàng</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class="bx bx-pie-chart-alt-2"></i>
          <span class="links_name">Thống kê</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class="bx bx-user"></i>
          <span class="links_name">Khách hàng</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class="ri-discount-percent-line"></i>
          <span class="links_name">Giảm giá</span>
        </a>
      </li>
      <li>
        <a href="#">
          <i class="bx bx-cog"></i>
          <span class="links_name">Cài đặt</span>
        </a>
      </li>
      <li class="log_out">
        <a href="#">
          <i class="bx bx-log-out"></i>
          <span class="links_name"> Đăng xuất</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- HOME CONTENT -->
  <section class="admin_home-section" id="csc">
    <!-- HEADER -->
    <nav>
      <div class="sidebar-button">
        <i class="bx bx-menu sidebarBtn"></i>
        <span class="admin_dashboard_title">Sản phẩm</span>
      </div>
      <div class="search-box">
        <input id="search-input" class="form-control" type="text" placeholder="Tìm kiếm..." />
        <i class="bx bx-search"></i>
      </div>
    </nav>

    <!-- CONTENT -->
    <div class="home-content">
      <!-- SORT & FILTER -->
      <div class="filter">
        <a href="#"><button class="filter_btn btn-filter">Tất cả</button></a>
        <a href="#"><button class="filter_btn btn-filter">Nước hoa</button></a>
        <a href="#"><button class="filter_btn btn-filter">Dầu gội</button></a>
        <a href="#"><button class="filter_btn btn-filter">Dầu xả</button></a>
        <a href="#"><button class="filter_btn btn-filter">Sữa tắm</button></a>
        <a href="#"><button class="filter_btn btn-filter">Dưỡng da</button></a>
        <a href="#"><button class="filter_btn btn-filter">Da mặt</button></a>
        <div class="filter_page">
          <button class="filter_btn btn-filter filter_product-btn" id="show_add-product" onclick="openModal()">
            <i class='bx bx-plus'></i>
            Thêm
          </button>
          <button class="filter_btn btn-filter filter_product-btn disabled delete-product" disabled="disabled"
            id="del_btn" type="submit" onclick="openModal_delete()">
            <i class='bx bxs-trash'></i>
            Xóa
          </button>
        </div>
      </div>

      <!-- PRODUCT TABLE -->
      <div class="table">
        <div class="table_section">
          <table class="product-table">
            <form>
              <thead>
                <tr>
                  <th>
                    <label for="SelectAll">
                      <input type="checkbox" id="SelectAll" name="">
                    </label>
                  </th>
                  <th class="product-table_id">Mã<span> &uarr;</span></th>
                  <th>Ảnh</th>
                  <th class="product-table_name">Tên<span> &uarr;</span></th>
                  <th>Giá<span> &uarr;</span></th>
                  <th>Số lượng<span> &uarr;</span></th>
                  <th class="product-table_action">Thao tác</th>
                </tr>
              </thead>
              <tbody id="tbody_product-table">
                <tr>
                  <td>
                    <input type="checkbox" class="select" name="">
                  </td>
                  <td><strong>Abc001</strong></td>
                  <td><img src="/admin/images/addidas.jpg"></td>
                  <td>Matcha latte socola sữa hột gà kim chi đỏ au Fayr Malisorn Sippakorn Aspara Yoko</td>
                  <td class="product-table_price">150</td>
                  <td>12</td>
                  <td>
                    <button title="Chi tiết" type="button" class="see-product_icon" onclick="openModal_view()">
                      <i class="ri-eye-fill"></i>
                    </button>

                    <button title="Sửa" type="button" class="edit-product_icon" onclick="openModal_edit()">
                      <i class='bx bxs-edit'></i>
                    </button>

                    <button title="Xóa" type="button" class="delete-product_icon" onclick="openModal_delete()">
                      <i class='bx bxs-trash'></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <input type="checkbox" class="select" name="">
                  </td>
                  <td><strong>Abc000</strong></td>
                  <td><img src="/admin/images/bag.jpg"></td>
                  <td>Matcha latte socola sữa hột gà kim chi đỏ au Fayr Malisorn Sippakorn Aspara Yoko1</td>
                  <td class="product-table_price">350</td>
                  <td>12</td>
                  <td>
                    <button title="Chi tiết" type="button" class="see-product_icon" onclick="openModal_view()">
                      <i class="ri-eye-fill"></i>
                    </button>

                    <button title="Sửa" type="button" class="edit-product_icon" onclick="openModal_edit()">
                      <i class='bx bxs-edit'></i>
                    </button>

                    <button title="Xóa" type="button" class="delete-product_icon" data-product-id="2">
                      <i class='bx bxs-trash'></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <input type="checkbox" class="select" name="">
                  </td>
                  <td><strong>ABc001</strong></td>
                  <td><img src="/admin/images/blueBag.jpg"></td>
                  <td>Aatcha latte socola sữa hột gà kim chi đỏ au Fayr Malisorn Sippakorn Aspara Yoko</td>
                  <td class="product-table_price">155</td>
                  <td>1</td>
                  <td>
                    <button title="Chi tiết" type="button" class="see-product_icon" onclick="openModal_view()">
                      <i class="ri-eye-fill"></i>
                    </button>

                    <button title="Sửa" type="button" class="edit-product_icon" onclick="openModal_edit()">
                      <i class='bx bxs-edit'></i>
                    </button>

                    <button title="Xóa" type="button" class="delete-product_icon" data-product-id="3">
                      <i class='bx bxs-trash'></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>
                    <input type="checkbox" class="select" name="">
                  </td>
                  <td><strong>Abc002</strong></td>
                  <td><img src="/admin/images/jeans.jpg"></td>
                  <td>Aatcha Aatte socola sữa hột gà kim chi đỏ au Fayr Malisorn Sippakorn Aspara Yoko</td>
                  <td class="product-table_price">450</td>
                  <td>40</td>
                  <td>
                    <button title="Chi tiết" type="button" class="see-product_icon" onclick="openModal_view()">
                      <i class="ri-eye-fill"></i>
                    </button>

                    <button title="Sửa" type="button" class="edit-product_icon" onclick="openModal_edit()">
                      <i class='bx bxs-edit'></i>
                    </button>

                    <button title="Xóa" type="button" class="delete-product_icon" data-product-id="4">
                      <i class='bx bxs-trash'></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </form>
          </table>
        </div>
      </div>
    </div>

    <!-- MODAL THÊM SẢN PHẨM -->
    <div id="add_product_Modal" class="add-product_modal">
      <div class="modal-content">
        <h2>Thêm sản phẩm</h2>
        <form id="addProductForm">
          <div class="popup-container">
            <div class="close-popup-btn" title="Đóng" onclick="closeModal()"><i class='bx bxs-x-circle'></i></div>
            <div class="popup_form">
              <div class="popup_form-element">
                <label for="product_code">Mã sản phẩm</label>
                <input type="text" id="product_code" placeholder="Nhập mã sản phẩm">
                <div class="error" id="error_product_code"></div>
              </div>
              <div class="popup_form-element">
                <label for="product_name">Tên sản phẩm</label>
                <input type="text" id="product_name" placeholder="Nhập tên sản phẩm">
                <div class="error" id="error_product_name"></div>
              </div>
              <div class="popup_form-element">
                <label for="product_price">Giá bán</label>
                <input type="text" id="product_price" placeholder="Nhập giá bán">
                <div class="error" id="error_product_price"></div>
              </div>
              <div class="popup_form-element">
                <label for="product_quantity">Số lượng</label>
                <input type="text" id="product_quantity" placeholder="Nhập số lượng">
                <div class="error" id="error_product_quantity"></div>
              </div>
              <div class="popup_form-element product_info_field">
                <label for="product_info">Mô tả</label>
                <textarea id="productDescription" name="productDescription" placeholder="Nhập mô tả sản phẩm" rows="6"
                  cols="50"></textarea>
              </div>
              <div class="popup_form-element popup_form-element-img">
                <input type="file" id="file-input_product" accept="image/png, image/jpeg" onchange="preview()" multiple>
                <label for="file-input_product" class="input_img">
                  <i class="ri-upload-2-fill"></i> &nbsp; Chọn ảnh
                </label>
                <p id="num-of-files_product">Không có ảnh nào được chọn</p>
                <div class="error" id="error_file_input"></div>
                <div id="upload_product_images"></div>
              </div>
              <div class="popup_form-element select-category-wrapper">
                <label for="product_category">Danh mục sản phẩm</label>
                <select id="productCategory" name="productCategory">
                  <option value="Nước hoa">Nước hoa</option>
                  <option value="Dầu gội">Dầu gội</option>
                  <option value="Dầu xả">Dầu xả</option>
                  <option value="Sữa tắm">Sữa tắm</option>
                  <option value="Dưỡng da">Dưỡng da</option>
                  <option value="Da mặt">Da mặt</option>
                </select>
              </div>
              <div class="popup_form-element">
                <input type="submit" class="btn_ad" value="Thêm sản phẩm">
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>


    <!-- MODAL SỬA SẢN PHẨM -->
    <div id="edit_product_Modal" class="edit-product_modal">
      <div class="modal-content">
        <h2>Sửa thông tin</h2>
        <form id="editProductForm">
          <div class="popup-container">
            <div class="close-popup-btn" title="Đóng" onclick="closeModal_edit()"><i class='bx bxs-x-circle'></i></div>
            <div class="popup_form">
              <div class="popup_form-element">
                <label for="product_code-edit">Mã sản phẩm</label>
                <input type="text" id="product_code-edit" placeholder="Nhập mã sản phẩm" readonly>
                <div class="error" id="error_product_code-edit"></div>
              </div>
              <div class="popup_form-element">
                <label for="product_name-edit">Tên sản phẩm</label>
                <input type="text" id="product_name-edit" placeholder="Nhập tên sản phẩm">
                <div class="error" id="error_product_name-edit"></div>
              </div>
              <div class="popup_form-element">
                <label for="product_price-edit">Giá bán</label>
                <input type="text" id="product_price-edit" placeholder="Nhập giá bán">
                <div class="error" id="error_product_price-edit"></div>
              </div>
              <div class="popup_form-element">
                <label for="product_quantity-edit">Số lượng</label>
                <input type="text" id="product_quantity-edit" placeholder="Nhập số lượng">
                <div class="error" id="error_product_quantity-edit"></div>
              </div>
              <div class="popup_form-element product_info_field">
                <label for="product_info-edit">Mô tả</label>
                <textarea id="productDescription-edit" name="productDescription-edit" placeholder="Nhập mô tả sản phẩm"
                  rows="6" cols="50"></textarea>
              </div>
              <div class="popup_form-element popup_form-element-img">
                <input type="file" id="file-input_product-edit" accept="image/png, image/jpeg" onchange="preview_edit()"
                  multiple>
                <label for="file-input_product-edit" class="input_img">
                  <i class="ri-upload-2-fill"></i> &nbsp; Chọn ảnh
                </label>
                <p id="num-of-files_product-edit">Không có ảnh nào được chọn</p>
                <div class="error" id="error_file_input-edit"></div>
                <div id="upload_product_images-edit"></div>
              </div>
              <div class="popup_form-element select-category-wrapper">
                <label for="product_category-edit">Danh mục sản phẩm</label>
                <select id="productCategory-edit" name="productCategory-edit">
                  <option value="Nước hoa">Nước hoa</option>
                  <option value="Dầu gội">Dầu gội</option>
                  <option value="Dầu xả">Dầu xả</option>
                  <option value="Sữa tắm">Sữa tắm</option>
                  <option value="Dưỡng da">Dưỡng da</option>
                  <option value="Da mặt">Da mặt</option>
                </select>
              </div>
              <div class="popup_form-element">
                <input type="submit" class="btn_ad" value="Thêm sản phẩm">
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>


    <!-- MODAL XEM CHI TIẾT SẢN PHẨM -->
    <div id="view_product_Modal" class="view-product_modal">
      <div class="modal-content">
        <h2>Thông tin sản phẩm</h2>
        <form id="viewProductForm">
          <div class="popup-container">
            <div class="close-popup-btn" title="Đóng" onclick="closeModal_view()"><i class='bx bxs-x-circle'></i></div>
            <div class="popup_form">
              <div class="popup_form-element view_modal">
                <label for="product_code-view">Mã sản phẩm:</label>
                <p class="product_view-content product_code-view">Abc001</p>
              </div>
              <div class="popup_form-element view_modal">
                <label for="product_name-view">Tên sản phẩm:</label>
                <p class="product_view-content product_name-view">bánh rán Doraemon nè Nobita</p>
              </div>
              <div class="popup_form-element view_modal">
                <label for="product_price-view">Giá bán:</label>
                <p class="product_view-content product_price-view">123.456.789</p>
              </div>
              <div class="popup_form-element view_modal">
                <label for="product_quantity-view">Số lượng:</label>
                <p class="product_view-content product_quantity-view">987,654</p>
              </div>
              <div class="popup_form-element product_info_field">
                <label for="product_info-view">Mô tả:</label>
                <p class="product_view-textarea product_info-view">Khai thác sức mạnh từ những đoá sen tinh khiết
                  từ vùng đất Hậu Giang kết hợp cùng các hoạt chất khoa học tiên tiến gồm Madecassoside,
                  vitamin B5, B12, Beta-glucan (prebiotic) và Sweetone® (chiết xuất quả ngũ vị tử),
                  nước sen Hậu Giang dịu lành giúp bảo vệ hàng rào độ ẩm của làn da nhạy cảm,
                  giảm mẩn đỏ và ngứa do khô ráp, mang lại cho làn da một cảm giác nhẹ nhàng, êm ái như được vỗ về.
                </p>
              </div>
              <div class="popup_form-element popup_form-element-img_view">
                <label for="product_images-view">Hình ảnh:</label>
                <div class="upload_product_images-view">
                  <img src="/admin/images/sunglasses.jpg" alt="">
                  <img src="/admin/images/nike-min.jpg" alt="">
                  <img src="/admin/images/profile.jpg" alt="">
                  <img src="/admin/images/scarves.jpg" alt="">
                </div>
              </div>
              <div class="popup_form-element view_modal">
                <label for="product_category-view">Danh mục sản phẩm:</label>
                <p class="product_view-content product_category-view">Dầu gội</p>
              </div>
              <div class="popup_form-element view_modal">
                <label for="product_rating-view">Đánh giá:</label>
                <div class="product_view-content product_rating-view product_rating">
                  <i class="ri-star-fill"></i>
                  <i class="ri-star-fill"></i>
                  <i class="ri-star-half-fill"></i>
                  <i class="ri-star-line"></i>
                  <i class="ri-star-line"></i>
                  <span>(10 lượt đánh giá)</span>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>


    <!-- MODAL XÓA SẢN PHẨM -->
    <div id="delete_product_Modal" class="delete-product_modal">
      <div class="delete-modal-content">
        <div class="delete_modal-header">
          <h2>Xóa sản phẩm</h2>
          <i class='ri-close-fill' title="Đóng" onclick="closeModal_delete()"></i>
        </div>
        <div class="delete_modal-middle">
          <p>Bạn sẽ không thể khôi phục thao tác này</p>
        </div>
        <div class="delete_modal-footer">
          <button class="modal-button" onclick="closeModal_delete()">Hủy</button>
          <button id="confirm_delete_button" class="modal-button">Xóa</button>
        </div>
      </div>
    </div>


  </section>

  <!-- JAVA Link -->
  <script src="/admin/js/product.js" defer></script>
  <script src="/admin/js/script.js" defer></script>
  <script>
    /* ===== BẪY LỖI THÊM SẢN PHẨM ===== */
    document.getElementById("addProductForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let valid = true;

      // Clear previous errors
      document.querySelectorAll(".error").forEach(el => el.innerText = "");
      document.querySelectorAll("input, textarea").forEach(el => el.classList.remove("error-input"));

      // Validate product code
      const productCode = document.getElementById("product_code");
      if (!productCode.value.trim()) {
        valid = false;
        productCode.classList.add("error-input");
        document.getElementById("error_product_code").innerText = "Mã không được để trống";
      }

      // Validate product name
      const productName = document.getElementById("product_name");
      if (!productName.value.trim()) {
        valid = false;
        productName.classList.add("error-input");
        document.getElementById("error_product_name").innerText = "Tên sản phẩm không được để trống";
      }

      // Validate product price
      const productPrice = document.getElementById("product_price");
      if (!productPrice.value.trim() || isNaN(productPrice.value)) {
        valid = false;
        productPrice.classList.add("error-input");
        document.getElementById("error_product_price").innerText = "Giá bán không được để trống và chỉ có thể nhập số";
      }

      // Validate product quantity
      const productQuantity = document.getElementById("product_quantity");
      if (!productQuantity.value.trim() || isNaN(productQuantity.value)) {
        valid = false;
        productQuantity.classList.add("error-input");
        document.getElementById("error_product_quantity").innerText = "Số lượng không được để trống và chỉ có thể nhập số";
      }

      // Validate product images
      const productImages = document.getElementById("file-input_product");
      if (productImages.files.length === 0) {
        valid = false;
        productImages.classList.add("error-input");
        document.getElementById("error_file_input").innerText = "Phải chọn ít nhất một hình ảnh";
      }

      if (valid) {
        alert("Đã thêm sản phẩm");
      }
    });

    /* ===== BẪY LỖI CHỈNH SỬA SẢN PHẨM ===== */
    document.getElementById("editProductForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let valid = true;

      // Clear previous errors
      document.querySelectorAll(".error").forEach(el => el.innerText = "");
      document.querySelectorAll("input, textarea").forEach(el => el.classList.remove("error-input"));

      // Validate product name
      const productName_edit = document.getElementById("product_name-edit");
      if (!productName_edit.value.trim()) {
        valid = false;
        productName_edit.classList.add("error-input");
        document.getElementById("error_product_name-edit").innerText = "Tên sản phẩm không được để trống";
      }

      // Validate product price
      const productPrice_eidt = document.getElementById("product_price-edit");
      if (!productPrice_eidt.value.trim() || isNaN(productPrice_eidt.value)) {
        valid = false;
        productPrice_eidt.classList.add("error-input");
        document.getElementById("error_product_price-edit").innerText = "Giá bán chỉ có thể nhập số và không thể để trống";
      }

      // Validate product quantity
      const productQuantity_eidt = document.getElementById("product_quantity-edit");
      if (!productQuantity_eidt.value.trim() || isNaN(productQuantity_eidt.value)) {
        valid = false;
        productQuantity_eidt.classList.add("error-input");
        document.getElementById("error_product_quantity-edit").innerText = "Số lượng chỉ có thể nhập số và không thể để trống";
      }

      // Validate product images
      const productImages_edit = document.getElementById("file-input_product-edit");
      if (productImages_edit.files.length === 0) {
        valid = false;
        productImages_edit.classList.add("error-input");
        document.getElementById("error_file_input-edit").innerText = "Phải chọn ít nhất một hình ảnh";
      }

      if (valid) {
        alert("Đã cập nhật sản phẩm.");
      }
    });

  </script>
</body>

</html>